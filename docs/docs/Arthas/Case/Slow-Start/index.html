<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slow Start | Troubleshooting</title>


<link rel="stylesheet" href="/Troubleshooting/book.min.a2277534155c5e81ce2c8ca6a4cd295525f25c75788a2e4e72c3310491c743b1.css">




<link rel="icon" href="/Troubleshooting/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://hello-world-example.github.io/Troubleshooting/">Troubleshooting</a>
</h2>






    
  
  
  

  <style>
  nav ul a[href$="\2fTroubleshooting\2f docs\2f Arthas\2f Case\2fSlow-Start\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><strong>Arthas</strong>
<ul>
<li><a href="/Troubleshooting/docs/Arthas/Install/">å®‰è£…</a></li>
<li><a href="/Troubleshooting/docs/Arthas/Commands/">å‘½ä»¤åˆ—è¡¨</a></li>
<li><a href="/Troubleshooting/docs/Arthas/Advice/">Advice</a></li>
<li><a href="/Troubleshooting/docs/Arthas/FAQ/">å¸¸è§é—®é¢˜</a></li>
<li><a href="/Troubleshooting/docs/Arthas/Case/">æ¡ˆä¾‹..</a>
<ul>
<li><a href="/Troubleshooting/docs/Arthas/Case/Slow-Start/">åº”ç”¨å¯åŠ¨è€—æ—¶åˆ†æ</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/Troubleshooting/docs/Java/"><strong>JDK å†…å»º</strong></a>
<ul>
<li><a href="/Troubleshooting/docs/Java/jcmd/"><!-- raw HTML omitted -->ğŸŒˆ<!-- raw HTML omitted -->jcmd</a></li>
<li><a href="/Troubleshooting/docs/Java/jps/">jps</a></li>
<li><a href="/Troubleshooting/docs/Java/jstat/">jstat</a></li>
<li><a href="/Troubleshooting/docs/Java/jstack/">jstack</a></li>
<li><a href="/Troubleshooting/docs/Java/jmap/">jmap</a></li>
<li><a href="/Troubleshooting/docs/Java/jhat/">jhat</a></li>
<li><a href="/Troubleshooting/docs/Java/jinfo/">jinfo</a></li>
<li><a href="/Troubleshooting/docs/Java/jstatd/">jstatd</a></li>
<li><a href="/Troubleshooting/docs/Java/jsadebugd/">jsadebugd</a></li>
</ul>
</li>
<li><a href="/Troubleshooting/docs/Jsonde/"><strong>Jsonde</strong></a></li>
</ul>







</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/Troubleshooting/svg/menu.svg" alt="Menu" />
  </label>
  <strong>Slow Start</strong>
</header>

      
<article class="markdown"><h1 id="åº”ç”¨å¯åŠ¨è€—æ—¶åˆ†æ">åº”ç”¨å¯åŠ¨è€—æ—¶åˆ†æ</h1>
<p>Arthas æœ¬èº«æ”¯æŒ <code>trace</code> å’Œ <code>profiler</code> åŠŸèƒ½ï¼Œåˆ†åˆ«ç”¨äº è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„è€—æ—¶ å’Œ ç”Ÿæˆç«ç„°å›¾</p>
<ul>
<li><code>trace</code> <a href="https://alibaba.github.io/arthas/trace.html">https://alibaba.github.io/arthas/trace.html</a></li>
<li><code>profiler</code> <a href="https://alibaba.github.io/arthas/profiler.html">https://alibaba.github.io/arthas/profiler.html</a></li>
</ul>
<p>ä½†æ˜¯ Arthas å¸¸ç”¨æ¥åˆ†æè¿è¡Œä¸­åº”ç”¨çš„é—®é¢˜ï¼Œåº”ç”¨å¯åŠ¨è¿‡ç¨‹åˆ†æåœ¨ Arthas Attach ä¸Šåº”ç”¨çš„æ—¶å€™ï¼Œå·²ç»é”™è¿‡è¦è¿½è¸ªçš„æ–¹æ³•äº†ã€‚</p>
<p>è¿™é‡Œä¸»è¦æè¿°äº†å¦‚ä½•æ—¶å€™ Arthas è¿›è¡Œåº”ç”¨å¯åŠ¨è¿‡ç¨‹ä¸­çš„åˆ†æã€‚</p>
<h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># ä¸‹è½½å®Œæ•´çš„åŒ…</span>
$ wget https://github.com/alibaba/arthas/releases/download/arthas-all-3.2.0/arthas-3.2.0-bin.zip

<span style="color:#75715e"># è§£å‹</span>
$ unzip arthas-3.2.0-bin.zip

<span style="color:#75715e"># è¿›å…¥å·¥å…·ç›®å½•</span>
$ cd arthas-3.2.0-bin
</code></pre></div><h2 id="ç¤ºä¾‹ç¨‹åº">ç¤ºä¾‹ç¨‹åº</h2>
<p>è¯¥ç¨‹åºæ˜¯ä¸€ä¸ª Spring Boot çš„åº”ç”¨ï¼Œè¿™é‡Œæ„é€ ä¸€æ®µè€—æ—¶çš„æ–¹æ³•ï¼Œå¤¹æ‚åˆ° Spring çš„å¯åŠ¨æµç¨‹ä¸­</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Slf4j</span>
<span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SlowConf</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@PostConstruct</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">init</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> InterruptedException <span style="color:#f92672">{</span>
        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;init...&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> 20_000<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
            Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">sleep</span><span style="color:#f92672">(</span>1<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;init...ok&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

</code></pre></div><h2 id="block-å¯åŠ¨çš„åº”ç”¨">Block å¯åŠ¨çš„åº”ç”¨</h2>
<p>åœ¨åº”ç”¨çš„å¯åŠ¨å‚æ•°ä¸­æ·»åŠ ä»¥ä¸‹ JVM å‚æ•°</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">-</span>agentlib<span style="color:#f92672">:</span>jdwp<span style="color:#f92672">=</span>transport<span style="color:#f92672">=</span>dt_socket<span style="color:#f92672">,</span>address<span style="color:#f92672">=</span>8000<span style="color:#f92672">,</span>server<span style="color:#f92672">=</span>y<span style="color:#f92672">,</span>suspend<span style="color:#f92672">=</span>y
</code></pre></div><p>å‚æ•°çš„å«ä¹‰</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-agentlib:jdwp           <span style="color:#75715e"># å¯ç”¨ JDWPï¼Œå®ƒåŒ…å«è‹¥å¹²å­é€‰é¡¹ï¼š</span>
    transport<span style="color:#f92672">=</span>dt_socket  <span style="color:#75715e"># JPDA front-endå’Œback-endä¹‹é—´çš„ä¼ è¾“æ–¹æ³•ã€‚dt_socketè¡¨ç¤ºä½¿ç”¨å¥—æ¥å­—ä¼ è¾“</span>
    address<span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span>         <span style="color:#75715e"># JVM åœ¨ 8000 ç«¯å£ä¸Šç›‘å¬è¯·æ±‚</span>
    server<span style="color:#f92672">=</span>y             <span style="color:#75715e"># y è¡¨ç¤ºå¯åŠ¨çš„JVMæ˜¯è¢«è°ƒè¯•è€…ï¼Œå¦‚æœä¸ºnï¼Œåˆ™è¡¨ç¤ºå¯åŠ¨çš„JVMæ˜¯è°ƒè¯•å™¨</span>
    suspend<span style="color:#f92672">=</span>y            <span style="color:#75715e"># y è¡¨ç¤ºå¯åŠ¨çš„JVMä¼šæš‚åœç­‰å¾…ï¼Œç›´åˆ°è°ƒè¯•å™¨è¿æ¥ä¸Šï¼Œnè¡¨ç¤ºä¸æš‚åœç­‰å¾…</span>
</code></pre></div><p>è¿™æ—¶ é Debugæ¨¡å¼ å¯åŠ¨åº”ç”¨ï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºï¼Œå¹¶ Block ä½ï¼Œç­‰å¾…è°ƒè¯•ç¨‹åºçš„è¿æ¥</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Listening <span style="color:#66d9ef">for</span> transport dt_socket at address: <span style="color:#ae81ff">8000</span>
</code></pre></div><p>ä¸å¢ä»¥ä¸Šå‚æ•°ï¼Œä½¿ç”¨ IDEA çš„ Debug æ¨¡å¼å¯åŠ¨åº”ç”¨æ—¶ï¼Œå…¶å®ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å°çš„ç¬¬ä¸€è¡Œçœ‹åˆ°è¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼Œ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home/bin/java <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-agentlib:jdwp<span style="color:#f92672">=</span>transport<span style="color:#f92672">=</span>dt_socket,address<span style="color:#f92672">=</span>127.0.0.1:49252,suspend<span style="color:#f92672">=</span>y,server<span style="color:#f92672">=</span>n <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-javaagent:~/Library/Caches/JetBrains/IdeaIC2020.1/captureAgent/debugger-agent.jar <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-Dfile.encoding<span style="color:#f92672">=</span>UTF-8 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-classpath ... <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>xyz.kail.demo.troubleshooting.arthas.ArthasApp

Connected to the target VM, address: <span style="color:#e6db74">&#39;127.0.0.1:49252&#39;</span>, transport: <span style="color:#e6db74">&#39;socket&#39;</span>
</code></pre></div><h2 id="å¯åŠ¨-arthas">å¯åŠ¨ Arthas</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ./as.sh 
... <span style="color:#75715e"># é€‰æ‹© Java è¿›ç¨‹ï¼Œå› ä¸ºè¿™æ—¶å€™ è¿˜æ²¡å®Œå…¨å¯åŠ¨ï¼Œçœ‹ä¸åˆ° main classï¼Œè¿™é‡Œé€‰æ‹© 5</span>
* <span style="color:#f92672">[</span>1<span style="color:#f92672">]</span>: <span style="color:#ae81ff">80041</span> org.jetbrains.idea.maven.server.RemoteMavenServer36
  <span style="color:#f92672">[</span>2<span style="color:#f92672">]</span>: <span style="color:#ae81ff">94888</span> org.jetbrains.kotlin.daemon.KotlinCompileDaemon
  <span style="color:#f92672">[</span>3<span style="color:#f92672">]</span>: <span style="color:#ae81ff">95213</span> org.jetbrains.jps.cmdline.Launcher
  <span style="color:#f92672">[</span>4<span style="color:#f92672">]</span>: <span style="color:#ae81ff">79647</span> 
  <span style="color:#f92672">[</span>5<span style="color:#f92672">]</span>: <span style="color:#ae81ff">95214</span> -- main class information unavailable
<span style="color:#ae81ff">5</span>

<span style="color:#75715e"># ... å¼€å¯ jdwp ä¹‹åï¼Œattach Java è¿›ç¨‹æ—¶ä¼šæ¯”å·²ç»å¯åŠ¨çš„åº”ç”¨æ…¢å¾ˆå¤šï¼Œå¤§æ¦‚ 10å‡ ç§’</span>

<span style="color:#75715e"># ç¡®è®¤ä¸€ä¸‹ï¼Œç¡®å®æ˜¯éœ€è¦è°ƒè¯•çš„åº”ç”¨</span>
<span style="color:#f92672">[</span>arthas@95214<span style="color:#f92672">]</span>$ sysprop | grep sun.java.command
sun.java.command                     xyz.kail.demo.troubleshooting.arthas.ArthasApp

<span style="color:#f92672">[</span>arthas@95214<span style="color:#f92672">]</span>$ jvm | grep INPUT-ARGUMENTS
INPUT-ARGUMENTS     -agentlib:jdwp<span style="color:#f92672">=</span>transport<span style="color:#f92672">=</span>dt_socket,address<span style="color:#f92672">=</span>8000,server<span style="color:#f92672">=</span>y,suspend<span style="color:#f92672">=</span>y
 
<span style="color:#75715e"># å¼€å¯ profiler</span>
<span style="color:#f92672">[</span>arthas@95214<span style="color:#f92672">]</span>$ profiler start -e wall
Started <span style="color:#f92672">[</span>wall<span style="color:#f92672">]</span> profiling
</code></pre></div><h2 id="å–æ¶ˆå¯åŠ¨åº”ç”¨çš„-block">å–æ¶ˆå¯åŠ¨åº”ç”¨çš„ Block</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ jdb -connect com.sun.jdi.SocketAttach:port<span style="color:#f92672">=</span>8000,hostname<span style="color:#f92672">=</span>127.0.0.1
è®¾ç½®æœªæ•è·çš„java.lang.Throwable
è®¾ç½®å»¶è¿Ÿçš„æœªæ•è·çš„java.lang.Throwable
æ­£åœ¨åˆå§‹åŒ–jdb...
&gt; 
VM å·²å¯åŠ¨: å½“å‰è°ƒç”¨å †æ ˆä¸Šæ²¡æœ‰å¸§

<span style="color:#75715e"># è¾“å…¥ run å‘½åï¼Œè¿™æ—¶ ArthasApp å·²å¼€å§‹æ­£å¸¸è¿è¡Œï¼ŒCtrl + C é€€å‡º jdb</span>
main<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> run
</code></pre></div><h2 id="æŸ¥çœ‹-profiler-åˆ†æç»“æœ">æŸ¥çœ‹ profiler åˆ†æç»“æœ</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>arthas@95214<span style="color:#f92672">]</span>$ profiler stop
profiler output file: /Users/kail/IdeaProjects/github/hello-world-example/Troubleshooting/arthas-output/20200524-135944.svg
OK
</code></pre></div><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ profiler çš„ç”Ÿæˆçš„ç‡ƒå°½å›¾ï¼š</p>
<p><img src="../-images/image-20200524140230200.png" alt="image-20200524140230200"></p>
<p>ç‚¹å‡»æœ€åä¸€ä¸ªå¯åŠ¨ main æ–¹å¼ç±»ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒçœŸä¸ªå¯åŠ¨è¿‡ç¨‹ï¼Œå¤§éƒ¨åˆ†æ¶ˆè€—åœ¨äº† <code>SlowConf.init</code> æ–¹æ³•ä¸Šäº†</p>
<p><img src="../-images/image-20200524140530699.png" alt="image-20200524140530699"></p>
<h2 id="ä½¿ç”¨-trace-åˆ†æå…·ä½“è€—æ—¶">ä½¿ç”¨ trace åˆ†æå…·ä½“è€—æ—¶</h2>
<p>trace åˆ†æå¯åŠ¨è¿‡ç¨‹çš„æ–¹å¼è¦ç¨å¾®å¤æ‚äº›ï¼Œå› ä¸ºåº”ç”¨å¯åŠ¨ Block æ—¶ï¼Œ<code>main</code> æ–¹æ³•è¿˜æ²¡è¢«åŠ è½½ï¼Œæ‰€ä»¥æ²¡åŠæ³• <code>trace</code>ï¼Œéœ€è¦å…ˆæ‰§è¡Œåˆ° <code>main</code> æ–¹æ³•ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¸¦ <code>-agentlib:jdwp</code> å¯åŠ¨åº”ç”¨ï¼Œè¿™æ˜¯åº”ç”¨è¢« Blockï¼Œç­‰åˆ° <code>jdb</code> é“¾æ¥</li>
<li>ä½¿ç”¨ Arthas attach åˆ°åº”ç”¨ï¼Œè¿™æ—¶å€™ <code>sc *ArthasApp</code> æ˜¯æœä¸åˆ°çš„</li>
<li>ä½¿ç”¨ <code>jdb</code> Debug åº”ç”¨ï¼Œè®¾ç½®åœ¨å…¥å£è®¾ç½®æ–­ç‚¹ï¼Œæ ¼å¼ï¼š<code>stop at ç±»å…¨è·¯å¾„å:è¡Œå·</code>
<ul>
<li>å¦‚ï¼š <code>stop at xyz.kail.demo.troubleshooting.arthas.ArthasApp:13</code></li>
</ul>
</li>
<li>åœ¨ <code>jdb</code> æ§åˆ¶å¤ªè¾“å‡º <code>cont</code> æŒ‡ä»¤ æ‰§è¡Œåˆ°å…¥å£çš„æ–­ç‚¹å¤„</li>
<li>åœ¨ Arthas æ§åˆ¶å° <code>trace</code> æ…¢æµç¨‹çš„æ–¹æ³•</li>
<li>é‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œç»†åŒ– <code>trace</code> çš„ç±»å’Œæ–¹æ³•</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># æŸ¥çœ‹ Classloader</span>
<span style="color:#f92672">[</span>arthas@808<span style="color:#f92672">]</span>$ classloader -t
+-BootstrapClassLoader                                                                                                                                                                     
+-sun.misc.Launcher$ExtClassLoader@7cc8d617                                                                                                                                                
  +-com.taobao.arthas.agent.ArthasClassloader@529ffda0                                                                                                                                     
  +-sun.misc.Launcher$AppClassLoader@18b4aac2     

<span style="color:#75715e"># ä½¿ç”¨ AppClassLoader åŠ è½½è¦æ‰§è¡Œçš„ç±»ï¼ˆå¦åˆ™æ— æ³• traceï¼‰</span>
<span style="color:#f92672">[</span>arthas@808<span style="color:#f92672">]</span>$ classloader -c 18b4aac2 --load org.springframework.boot.SpringApplication

<span style="color:#75715e"># trace ä¹‹åï¼ˆè¿™é‡Œæ‹¦æˆª String çš„åŒ…ï¼‰ï¼Œå¼€å¯ jdbï¼Œä½¿ç¨‹åºå¼€å§‹å¯åŠ¨ï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆ</span>
<span style="color:#f92672">[</span>arthas@808<span style="color:#f92672">]</span>$ trace org.springframework* * <span style="color:#e6db74">&#39;#cost &gt; 1000&#39;</span>
Press Q or Ctrl+C to abort.
Affect<span style="color:#f92672">(</span>class-cnt:1 , method-cnt:81<span style="color:#f92672">)</span> cost in <span style="color:#ae81ff">314</span> ms.
<span style="color:#e6db74">`</span>---ts<span style="color:#f92672">=</span>2020-05-24 15:48:50;thread_name<span style="color:#f92672">=</span>main;id<span style="color:#f92672">=</span>1;is_daemon<span style="color:#f92672">=</span>false;priority<span style="color:#f92672">=</span>5;TCCL<span style="color:#f92672">=</span>sun.misc.Launcher$AppClassLoader@18b4aac2
    <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>32459.956569ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:run<span style="color:#f92672">()</span>
        <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>32459.024813ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:run<span style="color:#f92672">()</span> <span style="color:#75715e">#1215</span>
            <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>32458.825821ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:run<span style="color:#f92672">()</span>
                ...
                <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>32282.689089ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:run<span style="color:#f92672">()</span> <span style="color:#75715e">#1226</span>
                    <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>32282.240717ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:run<span style="color:#f92672">()</span>
                        ...
                        +---<span style="color:#f92672">[</span>31271.331255ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:refreshContext<span style="color:#f92672">()</span> <span style="color:#75715e">#315</span>
                        |   <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>31271.273241ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:refreshContext<span style="color:#f92672">()</span>
                        |       +---<span style="color:#f92672">[</span>31262.084619ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:refresh<span style="color:#f92672">()</span> <span style="color:#75715e">#397</span>
                        |       |   <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>31262.034312ms<span style="color:#f92672">]</span> org.springframework.boot.SpringApplication:refresh<span style="color:#f92672">()</span>
                        |       |       +---<span style="color:#f92672">[</span>0.009773ms<span style="color:#f92672">]</span> org.springframework.util.Assert:isInstanceOf<span style="color:#f92672">()</span> <span style="color:#75715e">#746</span>
                        |       |       <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>31261.867912ms<span style="color:#f92672">]</span> org.springframework.context.support.AbstractApplicationContext:refresh<span style="color:#f92672">()</span> <span style="color:#75715e">#747 â¤ è¿™é‡ŒèŠ±äº† 30 ç§’</span>
                        |       <span style="color:#e6db74">`</span>---<span style="color:#f92672">[</span>9.075883ms<span style="color:#f92672">]</span> org.springframework.context.ConfigurableApplicationContext:registerShutdownHook<span style="color:#f92672">()</span> <span style="color:#75715e">#400</span>
                        ...


<span style="color:#f92672">[</span>arthas@1420<span style="color:#f92672">]</span> classloader -c 18b4aac2 --load  org.springframework.context.support.AbstractApplicationContext *

<span style="color:#f92672">[</span>arthas@1420<span style="color:#f92672">]</span> trace org.springframework.context.support.AbstractApplicationContext * <span style="color:#e6db74">&#39;#cost &gt; 10000&#39;</span>

<span style="color:#75715e"># å¾ªåè¯¥æ­¥éª¤ï¼ˆæ¯æ¬¡é‡å¯é¡¹ç›®ï¼‰ï¼Œæ¯æ¬¡å¾€ç»†èŠ‚å®šä½</span>
</code></pre></div><h2 id="å…¶ä»–æ–¹æ³•">å…¶ä»–æ–¹æ³•</h2>
<ul>
<li>ä»¥ä¸Šæ–¹æ³•å±äºé€šç”¨æ–¹æ³•ï¼Œä½¿ç”¨ä¸å„ç§åœºæ™¯ï¼Œä½†æ˜¯</li>
<li>å‡å¦‚ä½ å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œåœ¨ main æ–¹æ³•å…¥å£å…ˆ sleep 30 ç§’ï¼Œç„¶åæ‰“å¼€ Arthas å‡†å¤‡å¥½å„ç§ç›‘æ§çš„è¯­å¥ï¼Œä¼šæ›´ç®€ä¾¿</li>
</ul>
<h2 id="read-more">Read More</h2>
<ul>
<li><a href="https://alibaba.github.io/arthas/index.html">Arthas ç”¨æˆ·æ–‡æ¡£</a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/index.html">Java Platform Debugger Architecture (JPDA)</a></li>
<li><a href="https://www.jianshu.com/p/d168ecdce022">Javaè¿œç¨‹è°ƒè¯•ï¼ˆRemote Debuggingï¼‰çš„é‚£äº›äº‹</a></li>
<li><a href="https://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#starting">JVMTM Tool Interface</a></li>
</ul>
</article>

      
<div class="book-footer justify-end">
  
  
  <div>
    <a href="https://github.com/hello-world-example/Troubleshooting/edit/master/HuGo/content/docs/Arthas/Case/Slow-Start.md" target="_blank" rel="noopener">
      <img src="/Troubleshooting/svg/edit.svg" alt="Edit" /> Edit this page
    </a>
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-3 fixed">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</a></li>
    <li><a href="#ç¤ºä¾‹ç¨‹åº">ç¤ºä¾‹ç¨‹åº</a></li>
    <li><a href="#block-å¯åŠ¨çš„åº”ç”¨">Block å¯åŠ¨çš„åº”ç”¨</a></li>
    <li><a href="#å¯åŠ¨-arthas">å¯åŠ¨ Arthas</a></li>
    <li><a href="#å–æ¶ˆå¯åŠ¨åº”ç”¨çš„-block">å–æ¶ˆå¯åŠ¨åº”ç”¨çš„ Block</a></li>
    <li><a href="#æŸ¥çœ‹-profiler-åˆ†æç»“æœ">æŸ¥çœ‹ profiler åˆ†æç»“æœ</a></li>
    <li><a href="#ä½¿ç”¨-trace-åˆ†æå…·ä½“è€—æ—¶">ä½¿ç”¨ trace åˆ†æå…·ä½“è€—æ—¶</a></li>
    <li><a href="#å…¶ä»–æ–¹æ³•">å…¶ä»–æ–¹æ³•</a></li>
    <li><a href="#read-more">Read More</a></li>
  </ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
